- id: PsutilDriver
  name: Computer driver
  description: |-
    This is a driver for information about the computer where SmoothieAq
    is running. It is implemented using the psutil Python library, which 
    have different facilities on different types of computers.
    
    Current version supports two measures:
    
    - *A*: CPU load percentage, which is usually always available. Implemented
      by psutil.cpu_percent().
    - *B*: CPU core temperature, which is not always available. If it is
      not available, you should disable that measure. Implemented as
      the average of current temperatures in the coretemp group from 
      psutil.sensors_temperatures().
  canDiscover: true
  canMultiInstance: false
  canSingleObservable: false
  paramDescriptions:
    - id: PsutilDriver.p1
      key: pollEverySeconds
      defaultValue: "10"
      description: |-
        Specifies how often the driver should poll for new measures.
        Don't poll too often, as it will emit many measures.
  templateDevice:
    name: Computer
    description: The computer running SmoothieAq
    site: aquarium1
    place: cupboard
    category: aux
    type: computer
    driver:
      id: PsutilDriver
      path: computer
      params:
        - key: pollEverySeconds
          value: "10"
    observables:
      - type: Measure
        id: A
        name: CPU load
        description: CPU load percentage
        quantityType: fraction.%
        precision: 0.1
        emitControl:
          decimals: 1
          supressSameLimit: 0.5
        require:
          warningNotBelow: 75
          isBelow: 90
      - type: Measure
        id: B
        name: CPU temperature
        description: Average of the temperatures of the CPU cores
        quantityType: temp.Â°C
        precision: 5
        emitControl:
          decimals: 0
        require:
          warningNotBelow: 90
          isBelow: 110
- id: DummyDriver
  name: Dummy driver
  description: |-
    todo.
  canDiscover: false
  canMultiInstance: true
  canSingleObservable: true
  paramDescriptions:
    - id: DummyDriver.p1
      key: pollEverySeconds
      defaultValue: "10"
      description: |-
        Specifies how often the driver should poll for new measures.
        Don't poll too often, as it will emit many measures.
    - id: DummyDriver.p2
      key: generateGaussMu
      defaultValue: "24"
      description: |-
        Todo.
    - id: DummyDriver.p2
      key: generateGaussSigma
      defaultValue: "1.5"
      description: |-
        Todo.
  templateDevice:
    name: DUMMY
    driver:
      id: DummyDriver
      params:
        - key: pollEverySeconds
          value: "10"
        - key: generateGaussMu
          value: "24"
        - key: generateGaussSigma
          value: "15"
    observables:
      - type: Measure
        id: A
        name: Dummy
- id: MemoryDriver
  name: Memory driver
  description: |-
    todo.
  canDiscover: false
  canMultiInstance: true
  canSingleObservable: true
  templateDevice:
    name: MEMORY
    driver:
      id: MemoryDriver
- id: MemoryMeasureDriver
  name: Memory measure driver
  description: |-
    todo.
  canDiscover: false
  canMultiInstance: true
  canSingleObservable: true
  templateDevice:
    name: MEMORY
    driver:
      id: MemoryDriver
    observables:
      - type: Measure
        id: A
        name: Memory
- id: MemoryStateDriver
  name: Memory state driver
  description: |-
    todo.
  canDiscover: false
  canMultiInstance: true
  canSingleObservable: true
  templateDevice:
    name: MEMORY
    driver:
      id: MemoryDriver
    observables:
      - type: State
        id: A
        name: Memory
